.pc.grid.gap-6.p-2.auto-rows-max
	input(type="hidden"  name="attr_tab" value="main")
	
	.grid.gap-4
		.flex.flex-wrap.flex-row.gap-4
			.logo.grow-0
				img(src='https://raw.githubusercontent.com/quasireal-publishing/roll20-mythcraft/refs/heads/main/Mythcraft/src/imgs/Mythcraft-Logo-Badge-Textured-Black.png' alt="Mythcraft Logo" title="Mythcraft Logo")
			.grid.gap-1.grow.bio
				.grid.grid-flow-col.gap-2.name-row
					+headerInput('character name')
					+headerInput('lineage')
				.grid.grid-flow-col.gap-2.name-row
					each val in ['level', 'size']
						+headerInput(val)
				.grid.grid-flow-col.gap-2
					each val in ['height', 'weight', 'age']
						+headerInput(val)
				.grid.grid-flow-col.gap-2
					each val in ['appearance']
						+headerInput(val)
		.grid.gap-2.grid-flow-col.auto-cols-min
			each tab in ['main', 'combat', 'magic', 'talents', 'journal', 'settings']
				.grid.tab.relative
					input(type="radio" name="attr_tab" value=tab checked=(!!tab === 'main'))
					if tab === 'settings'
						span.pictos.lowercase y
					else
						span(data-i18n=tab).capitalize


	.grid.gap-6.main
		.grid.gap-2.solid-border-2.rounded-md.p-2.relative
			+title('personality / background')
			.grid.grid-flow-col.gap-2.personality
				each val in [ 'values', 'drive', 'quirk']
					+headerInput(val)(class=`${val}`)
			.grid.grid-flow-col.gap-2.background
				each val in ['background', 'profession']
					+headerInput(val)(class=`${val}`)

		.grid.gap-2.grid-flow-col.items-center.content-start.attrs.relative
			each val in combatAttributes
				.circle.rounded-full.border.grid.justify-center.items-center.font-bold
					+attributeRoll(shortName(val), `${val}`)
					+numberInput(val)

		.grid.grid-flow-cols.gap-4.content-start.p-2.relative.grid-cols-2
			.grid.gap-6.content-start
				+repeatingList('inventory', {display: ['name', 'qty', ], collapse: ['tags', "cost"]})
				.grid.solid-border-2.rounded-md.p-2.relative
					+title('currency')
					.grid.gap-2.items-center.grid-flow-col.mb-2
						each val in ['a', 'sc', 'q', 'dc']
							.grid.col-auto-fr.gap-1.grid-flow-col.items-center
								+h3Header(val)
								+numberInput(val)(class="text-center")
					.grid.mt-1
						+textarea("currency")
			.grid.gap-6.content-start
				.grid.solid-border-2.rounded-md.p-2.relative.skills
					+title('skills')
					+subheaders(['name', 'attribute', 'bonus'])
					+repeatingSkills('skill')
				+repeatingList('favorites', {display: ['name', 'tags', ]})

		
	.grid.gap-6.combat
		.grid.grid-flow-col.gap-2.hp-row
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("hp & shield")
				.grid.grid-flow-col.gap-2.hp.mt-1
					+numberInputWithMax("hp")
					.grid.justify-center.items-center
						+numberInput("shield")(class="text-center")
						+h3Header("shield")
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("death points")
				.grid.mt-1
					+numberInputWithMax("death points")
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("AR")
				.grid.mt-1
					+textInput("armor rating", 10)(class="text-center")
					+h3Header("armor rating")
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("speed")
				.grid.mt-1
					+textInput("speed","20")(class="text-center")
					+h3Header("ft")(class="lowercase")
		.grid.grid.grid-flow-col.gap-2.items-center
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("action points")
				.grid.grid-flow-col.gap-2.mt-1
					.grid.justify-center.items-center
						+numberInput("action points")
						+h3Header("current")
					.grid.justify-center.items-center
						+attrSpan("action points per round")(class="text-center")
						+h3Header("ap/round")
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("special action points")
				.grid.mt-1
					+numberInputWithMax("special action points")
			.grid.solid-border-2.rounded-md.p-2.relative
				+title("luck points")
				.grid.mt-1
					+numberInputWithMax("luck points")
			.grid.solid-border-2.rounded-md.p-2.relative.h-full
				+title("initiative")
				.grid.grid-flow-col.gap-2.mt-1.grid-cols-2
					.grid.justify-center.items-center
						+numberInput("initiative bonus", 0)
						+h3Header("modifier")
					.grid.justify-center.items-center
						+attrSpan("initiative")(class="text-center")
						+initiativeButton()

		+combatAttributes()
		
		.grid.solid-border-2.rounded-md.p-2.relative.attacks
			+title("attacks & spellcasting")
			+subheaders(["name", "apc", "attribute", "bonus", "damage", "type", "range"])
			.grid.gap-4
				+repeatingAttacks()
		.grid.gap-4.grid-flow-col.auto-cols-fr
			.grid.gap-6.content-start
				+repeatingList('reactive actions', {display: ['name', 'ap']})
				+repeatingList('conditions', {display: ['name']})
			.grid.gap-6.content-start.auto-cols-fr
				+repeatingList('favorites', {display: ['name', 'tags', ]})
				+repeatingResources('trackables')


	.grid.gap-6.magic
		.grid.grid-flow-col.gap-2.points-source
			.grid.gap-6.content-start
				.grid.solid-border-2.rounded-md.p-2.relative
					+title("spell points")
					.grid.mt-1
						+numberInputWithMax("spell points")
				.grid.grid-flow-col.gap-4
					.grid.solid-border-2.rounded-md.p-2.relative
						+title("spellcasting ability")
						.grid.justify-center.items-center.mt-1
							select(name="attr_spellcasting_ability")
								each val in coreAttributes
									option(value=`@{${val}}` data-i18n=val)
										val
					input(type="hidden" name="attr_primary_source" value="arcane")
					.grid.solid-border-2.rounded-md.p-2.relative
						+title("primary source")
						.grid.justify-center.items-center.mt-1
							select(name="attr_primary_source")
								each val in magicSources
									option(value=`${val}` data-i18n=val)
									val
					
			.grid.solid-border-2.rounded-md.content-start.p-2.source-magic.relative
				+title('source')
				+subheaders(['name', 'power level'])
				fieldset(class=`repeating_sources`)
					input(type="hidden" name="attr_link" value="")
					.grid.gap-2.relative.repeating-grid
						.grid.grid-flow-col.gap-2.displayed.custom-grid
							+repeatingChatButton(attrName('source')).capitalize
							+attrSpan('power level')(class="display ellipse text-center")
						+editToggle()
						+collapseToggle()
						.collapsible.grid.gap-2
							.description
								span.display(name='attr_description')
						.edit.grid.gap-2
							.grid.gap-2.edit-grid
								.grid.items-center.gap-2.grid-flow-col.col-auto-fr
									+h4Header("name")
									select(name="attr_name")
										each val in magicSources
											option(value=`${val}` data-i18n=val).capitalize
												val
								.grid.justify-center.items-center
									+editInput('power level')
							.description
								+textarea('description')

		.grid.gap-6.items-center.spell-list
			.grid.solid-border-2.rounded-md.p-2.relative.content-start.spells.spell-cards
				+title('spells')
				+repeatingSpellCards()
	
	.grid.gap-6.journal
		.grid.rounded-md.relative
			+repeatingList('additional info', {display: ['name', "category"]})
			
		.grid.gap-2.grid-flow-col.auto-cols-fr
			+repeatingList('location request contacts', {display: ['name']})

			+repeatingResources('resources')

		+repeatingList('journal', {display: ['name', 'date']})

	.grid.gap-4.talents.grid-flow-col.talent-grid.auto-cols-fr
		+repeatingList('talents', {display: ['name', "tags"], collapse: ['prerequisites'], favorite: true})
		+repeatingList('abilities', {display: ['name', 'tags'], favorite: true})

	.grid.gap-6.settings
		.grid.gap-4.grid-flow-col.grid-cols-2
			.grid.solid-border-2.rounded-md.p-2.relative.justify-center.h-max
				+title('character type')
				.mt-2
					+sheetSelect()
			.grid.solid-border-2.rounded-md.p-2.relative
				+title('modifiers')
				+subheaders(['active', 'attribute', 'modifier', 'source'])
				fieldset(class=`repeating_modifiers`)
					input(type="hidden" name="attr_link" value="")
					.grid.gap-2.relative.repeating-grid
						.grid.grid-flow-col.gap-2.displayed.custom-grid.custom-grid
							+switch('active')
							each val in ['attribute', 'modifier', 'source']
								+attrSpan(val)(class="display ellipse capitalize text-center")
						+editToggle()
						+collapseToggle()
						.collapsible.grid.gap-2
							+headerSpan(['source'])
							.description
								span.display(name='attr_description')
						.edit.grid.gap-2
							.grid.gap-2.edit-grid
								select(name="attr_attribute")
									each val in [...derivedAttributes].sort()
										option(value=`${attrName(val)}` data-i18n=val)
											val
								.grid.gap-2.grid-flow-col
									+editInput('modifier')
									+editInput('source')
							.description
								+textarea('description')